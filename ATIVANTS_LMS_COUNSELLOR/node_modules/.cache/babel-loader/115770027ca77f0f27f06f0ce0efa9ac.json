{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Activants46\\\\Desktop\\\\githubLMS\\\\counsellorserver\\\\ATIVANTS_LMS_COUNSELLOR\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Activants46\\\\Desktop\\\\githubLMS\\\\counsellorserver\\\\ATIVANTS_LMS_COUNSELLOR\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"C:\\\\Users\\\\Activants46\\\\Desktop\\\\githubLMS\\\\counsellorserver\\\\ATIVANTS_LMS_COUNSELLOR\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\Activants46\\\\Desktop\\\\githubLMS\\\\counsellorserver\\\\ATIVANTS_LMS_COUNSELLOR\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\Activants46\\\\Desktop\\\\githubLMS\\\\counsellorserver\\\\ATIVANTS_LMS_COUNSELLOR\\\\src\\\\SecondaryComponents\\\\Desktop\\\\UserDashboard\\\\layout\\\\CounsellorCreateMessageModel.js\";\nimport React, { useState, useContext, useEffect } from 'react';\nimport { Button, Form, Header, Image, Input, Dropdown, Grid, Message, Segment, Card, Img, Icon, Table, Label, Container, List, Popup } from \"semantic-ui-react\";\nimport { ToastContainer, toast } from 'react-toastify';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport DatePicker from 'react-datepicker';\n\nvar axios = require('axios');\n\nvar daysNotAvailableList = [];\n\nvar CreateMessage = /*#__PURE__*/function (_React$Component) {\n  _inherits(CreateMessage, _React$Component);\n\n  var _super = _createSuper(CreateMessage);\n\n  function CreateMessage(props) {\n    var _this;\n\n    _classCallCheck(this, CreateMessage);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      body: '',\n      subject: '',\n      catagory: '',\n      formWarning: '',\n      slotOptions: []\n    };\n\n    _this.submitRequest = function () {\n      var sessionDetails = undefined;\n      console.log([_this.state.catagory, _this.state.body, _this.state.subject]);\n\n      if (_this.state.catagory && _this.state.body && _this.state.subject) {\n        console.log([_this.props.UserID, _this.props.CounsellorID, _this.state.catagory, _this.state.body, _this.state.subject]);\n\n        if (Number.isInteger(parseInt(_this.props.UserID)) && Number.isInteger(parseInt(_this.props.CounsellorID))) {\n          var data = {\n            user1: _this.props.UserID,\n            user2: _this.props.CounsellorID,\n            catagory: _this.state.catagory,\n            message: _this.state.body,\n            subject: _this.state.subject\n          };\n          console.log(data);\n          var headers = {\n            jwtToken: localStorage.jwtToken\n          };\n          axios.post(\"http://localhost:5000/messages/createChats\", data, {\n            headers: headers\n          }).then(function (res) {\n            console.log(res);\n            console.log(res.data);\n            toast.success('Message is sent to counsellor!', {\n              position: \"top-right\",\n              autoClose: 3000,\n              hideProgressBar: true,\n              closeOnClick: true,\n              pauseOnHover: false,\n              draggable: true,\n              progress: ''\n            });\n          }).catch(function (error) {\n            if (error.response) {\n              toast.error('Unsuccessful to send message to counsellor', {\n                position: \"top-right\",\n                autoClose: 3000,\n                hideProgressBar: true,\n                closeOnClick: true,\n                pauseOnHover: false,\n                draggable: true,\n                progress: ''\n              });\n            }\n          });\n        } else {\n          toast.error('Session Expired. Please relogin', {\n            position: \"top-right\",\n            autoClose: 3000,\n            hideProgressBar: true,\n            closeOnClick: true,\n            pauseOnHover: false,\n            draggable: true,\n            progress: ''\n          });\n        }\n      } else {\n        _this.setState({\n          formWarning: \"Invalid form\"\n        });\n      }\n    };\n\n    _this.slotChange = function (e, data) {\n      console.log(\"---------------------------------\");\n\n      _this.setState({\n        catagory: data.value,\n        formWarning: ''\n      });\n\n      console.log(data);\n    };\n\n    _this._onKeyUpSubject = function (e) {\n      var value = e.target.value.toLowerCase();\n\n      _this.setState({\n        subject: value\n      });\n    };\n\n    _this._onKeyUpMessage = function (e) {\n      var value = e.target.value.toLowerCase();\n\n      _this.setState({\n        body: value\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(CreateMessage, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      console.log(this.props);\n      console.log(this.state);\n      var slotOptions = [{\n        key: 'enquiry on counselling specialty',\n        value: 'enquiry on counselling specialty',\n        text: 'enquiry on counselling specialty'\n      }, {\n        key: 'enquiry on counselling timing',\n        value: 'enquiry on counselling timing',\n        text: 'enquiry on counselling timing'\n      }, {\n        key: 'suggest different timing',\n        value: 'suggest different timing',\n        text: 'suggest different timing'\n      }, {\n        key: 'enquiry on conselling fee',\n        value: 'enquiry on conselling fee',\n        text: 'enquiry on conselling fee'\n      }];\n      this.setState({\n        slotOptions: slotOptions,\n        formWarning: ''\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(Container, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 7\n        }\n      }, \" \", /*#__PURE__*/React.createElement(Segment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(Form, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 9\n        }\n      }, \" \", /*#__PURE__*/React.createElement(Form.Group, {\n        widths: \"equal\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152,\n          columnNumber: 18\n        }\n      }, /*#__PURE__*/React.createElement(Form.Select, {\n        placeholder: \"Add catagory\",\n        label: \"Catagory\",\n        fluid: true,\n        selection: true,\n        value: this.state.catagory,\n        onChange: this.slotChange,\n        options: this.state.slotOptions,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154,\n          columnNumber: 11\n        }\n      })), /*#__PURE__*/React.createElement(Form.Group, {\n        widths: \"equal\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(Form.Input, {\n        label: \"Subject\",\n        type: \"subject\",\n        onChange: this._onKeyUpSubject,\n        name: \"s\",\n        id: \"s\",\n        placeholder: \"subject\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 13\n        }\n      })), \" \", /*#__PURE__*/React.createElement(Form.Group, {\n        widths: \"equal\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 25\n        }\n      }, /*#__PURE__*/React.createElement(Form.TextArea, {\n        label: \"Message\",\n        type: \"message\",\n        onChange: this._onKeyUpMessage,\n        name: \"s\",\n        id: \"s\",\n        placeholder: \"message\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 13\n        }\n      })))), /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          color: 'red'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 9\n        }\n      }, this.state.formWarning), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        class: \"ui button\",\n        onClick: this.submitRequest,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 9\n        }\n      }, \"Submit\"));\n    }\n  }]);\n\n  return CreateMessage;\n}(React.Component);\n\nexport default CreateMessage;","map":{"version":3,"sources":["C:/Users/Activants46/Desktop/githubLMS/counsellorserver/ATIVANTS_LMS_COUNSELLOR/src/SecondaryComponents/Desktop/UserDashboard/layout/CounsellorCreateMessageModel.js"],"names":["React","useState","useContext","useEffect","Button","Form","Header","Image","Input","Dropdown","Grid","Message","Segment","Card","Img","Icon","Table","Label","Container","List","Popup","ToastContainer","toast","DatePicker","axios","require","daysNotAvailableList","CreateMessage","props","state","body","subject","catagory","formWarning","slotOptions","submitRequest","sessionDetails","undefined","console","log","UserID","CounsellorID","Number","isInteger","parseInt","data","user1","user2","message","headers","jwtToken","localStorage","post","then","res","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","catch","error","response","setState","slotChange","e","value","_onKeyUpSubject","target","toLowerCase","_onKeyUpMessage","key","text","color","Component"],"mappings":"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","sourcesContent":["\r\nimport React, { useState, useContext, useEffect } from 'react';\r\nimport {\r\n  Button,\r\n  Form,\r\n  Header,\r\n  Image,\r\n  Input, Dropdown, Grid,\r\n  Message,\r\n  Segment, Card, Img, Icon,\r\n  Table, Label, Container, List, Popup\r\n} from \"semantic-ui-react\";\r\n\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport DatePicker from 'react-datepicker';\r\nconst axios = require('axios');\r\n\r\nvar daysNotAvailableList = [];\r\nclass CreateMessage extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n  }\r\n\r\n  state = {\r\n    body: '',\r\n    subject: '',\r\n    catagory: '',\r\n    formWarning: '',\r\n    slotOptions: []\r\n  }\r\n\r\n  componentDidMount() {\r\n    console.log(this.props);\r\n    console.log(this.state);\r\n    var slotOptions = [\r\n      { key: 'enquiry on counselling specialty', value: 'enquiry on counselling specialty', text: 'enquiry on counselling specialty' },\r\n      { key: 'enquiry on counselling timing', value: 'enquiry on counselling timing', text: 'enquiry on counselling timing' },\r\n      { key: 'suggest different timing', value: 'suggest different timing', text: 'suggest different timing' },\r\n      { key: 'enquiry on conselling fee', value: 'enquiry on conselling fee', text: 'enquiry on conselling fee' },\r\n\r\n\r\n    ];\r\n    this.setState({ slotOptions: slotOptions, formWarning: '' });\r\n\r\n  };\r\n\r\n  submitRequest = () => {\r\n    var sessionDetails = undefined;\r\n\r\n    console.log([this.state.catagory, this.state.body, this.state.subject]);\r\n    if (this.state.catagory && this.state.body && this.state.subject) {\r\n     \r\n      console.log([\r\n        this.props.UserID ,this.props.CounsellorID ,\r\n        \r\n        \r\n        this.state.catagory, this.state.body, this.state.subject ]);\r\n        if (Number.isInteger(parseInt(this.props.UserID)   )  &&   Number.isInteger(parseInt(this.props.CounsellorID)   ) ) {\r\n            const data = {\r\n              user1:   this.props.UserID,\r\n              user2:  this.props.CounsellorID  ,\r\n              catagory:this.state.catagory   ,\r\n              message:this.state.body ,\r\n              subject :this.state.subject\r\n            };\r\n\r\n            console.log(data)\r\n\r\n\r\n            const headers = {\r\n              jwtToken: localStorage.jwtToken\r\n            }\r\n      \r\n            axios.post(`http://localhost:5000/messages/createChats`, data, {\r\n              headers: headers\r\n            }) \r\n      .then(res => {\r\n          console.log(res);\r\n          console.log(res.data);\r\n\r\n\r\n              toast.success('Message is sent to counsellor!', {\r\n                  position: \"top-right\",\r\n                  autoClose: 3000,\r\n                  hideProgressBar: true,\r\n                  closeOnClick: true,\r\n                  pauseOnHover: false,\r\n                  draggable: true,\r\n                  progress: '',\r\n              });\r\n\r\n      }).catch((error) => {\r\n          if (error.response) {\r\n\r\n              toast.error('Unsuccessful to send message to counsellor', {\r\n                  position: \"top-right\",\r\n                  autoClose: 3000,\r\n                  hideProgressBar: true,\r\n                  closeOnClick: true,\r\n                  pauseOnHover: false,\r\n                  draggable: true,\r\n                  progress: '',\r\n              });\r\n\r\n\r\n              }\r\n\r\n\r\n      });\r\n      \r\n    }else {\r\n      toast.error('Session Expired. Please relogin', {\r\n        position: \"top-right\",\r\n        autoClose: 3000,\r\n        hideProgressBar: true,\r\n        closeOnClick: true,\r\n        pauseOnHover: false,\r\n        draggable: true,\r\n        progress: '',\r\n    });\r\n       \r\n    }\r\n \r\n    } else {\r\n\r\n      this.setState({ formWarning: \"Invalid form\" });\r\n    }\r\n  };\r\n  slotChange = (e, data) => {\r\n    console.log(\"---------------------------------\");\r\n    this.setState({ catagory: data.value, formWarning: '' });\r\n\r\n    console.log(data);\r\n  };\r\n  _onKeyUpSubject = e => {\r\n    var value = e.target.value.toLowerCase();\r\n    this.setState({ subject: value });\r\n  };\r\n  _onKeyUpMessage = e => {\r\n    var value = e.target.value.toLowerCase();\r\n    this.setState({ body: value });\r\n  };\r\n\r\n  render() {\r\n    return (\r\n\r\n      <Container> <Segment>\r\n\r\n \r\n        <Form  > < Form.Group widths='equal'>\r\n\r\n          <Form.Select   placeholder='Add catagory'\r\n            label=\"Catagory\"\r\n            fluid \r\n            selection value={this.state.catagory}\r\n            onChange={this.slotChange} options={this.state.slotOptions} />\r\n        </Form.Group >\r\n          < Form.Group  widths='equal' >\r\n            <Form.Input label=\"Subject\"\r\n              \r\n              type=\"subject\"\r\n              onChange={this._onKeyUpSubject}\r\n              name=\"s\"\r\n              id=\"s\"\r\n              placeholder=\"subject\"\r\n            />\r\n            <br />\r\n          </Form.Group> < Form.Group  widths='equal'>\r\n            <Form.TextArea\r\n              label=\"Message\"\r\n              \r\n              type=\"message\"\r\n              onChange={this._onKeyUpMessage}\r\n              name=\"s\"\r\n              id=\"s\"\r\n              placeholder=\"message\"\r\n            />\r\n          </Form.Group>\r\n        </Form>\r\n      </Segment>  \r\n        <p style={{ color: 'red' }}>{this.state.formWarning}</p>\r\n        < br />\r\n        <button class=\"ui button\" onClick={this.submitRequest}>Submit</button>\r\n\r\n      </Container>\r\n\r\n\r\n    )\r\n  }\r\n}\r\n\r\nexport default CreateMessage;\r\n\r\n"]},"metadata":{},"sourceType":"module"}