{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\ACTIVANTS\\\\Desktop\\\\LMS Councellor\\\\Activants_LMS_Counsellor\\\\ATIVANTS_LMS_COUNSELLOR\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\ACTIVANTS\\\\Desktop\\\\LMS Councellor\\\\Activants_LMS_Counsellor\\\\ATIVANTS_LMS_COUNSELLOR\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\ACTIVANTS\\\\Desktop\\\\LMS Councellor\\\\Activants_LMS_Counsellor\\\\ATIVANTS_LMS_COUNSELLOR\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\ACTIVANTS\\\\Desktop\\\\LMS Councellor\\\\Activants_LMS_Counsellor\\\\ATIVANTS_LMS_COUNSELLOR\\\\src\\\\MainComponents\\\\DesktopComponent.js\";\n\nimport GetWidthOfComponent from './GetWidthOfComponent';\nimport React, { useState, useEffect } from 'react';\nimport _NavigationItems from '../SecondaryComponents/Desktop/_NavigationItems';\nimport _Promos from '../SecondaryComponents/Desktop/_Promos';\nimport axios from 'axios';\nimport { Responsive } from 'semantic-ui-react';\nimport UserDashboard from '../SecondaryComponents/Desktop/UserDashboard/UserDashboard';\nimport Cookies from 'js-cookie';\nimport { ToastContainer, toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { BrowserRouter as Router, Switch, Route, Redirect } from \"react-router-dom\";\nvar Authorize = React.createContext();\n\nvar DesktopComponent = function DesktopComponent(_ref) {\n  var children = _ref.children;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isAuthenticated = _useState2[0],\n      setIsAuthenticated = _useState2[1];\n\n  var setAuth = function setAuth(boolean) {\n    setIsAuthenticated(boolean);\n  };\n\n  var checkAuthenticated = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var res, parseRes, response, _parseRes;\n\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n\n              if (!localStorage.jwtToken) {\n                _context.next = 11;\n                break;\n              }\n\n              _context.next = 4;\n              return fetch(\"http://localhost:5000/auth/verify/\", {\n                method: \"GET\",\n                headers: {\n                  jwtToken: localStorage.jwtToken\n                }\n              });\n\n            case 4:\n              res = _context.sent;\n              _context.next = 7;\n              return res.json();\n\n            case 7:\n              parseRes = _context.sent;\n              parseRes === true ? setIsAuthenticated(true) : setIsAuthenticated(false);\n              _context.next = 18;\n              break;\n\n            case 11:\n              _context.next = 13;\n              return fetch(\"http://localhost:5000/socialauth//google/validateCookie\", {\n                method: \"POST\",\n                headers: {\n                  \"Content-Type\": \"application/json\"\n                }\n              });\n\n            case 13:\n              response = _context.sent;\n              _context.next = 16;\n              return response.json();\n\n            case 16:\n              _parseRes = _context.sent;\n\n              if (_parseRes.jwtToken) {\n                localStorage.setItem(\"jwtToken\", _parseRes.jwtToken);\n                setAuth(true);\n                toast.success('login successfull!', {\n                  position: \"top-right\",\n                  autoClose: 3000,\n                  hideProgressBar: false,\n                  closeOnClick: true,\n                  pauseOnHover: false,\n                  draggable: true,\n                  progress: ''\n                });\n              }\n\n            case 18:\n              _context.next = 23;\n              break;\n\n            case 20:\n              _context.prev = 20;\n              _context.t0 = _context[\"catch\"](0);\n              console.error(_context.t0.message);\n\n            case 23:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 20]]);\n    }));\n\n    return function checkAuthenticated() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    checkAuthenticated();\n  }, []);\n  return /*#__PURE__*/React.createElement(Responsive, {\n    getWidth: GetWidthOfComponent,\n    minWidth: Responsive.onlyTablet.minWidth,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Router, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Authorize.Provider, {\n    value: setAuth,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Switch, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/dashboard\",\n    render: function render(props) {\n      return isAuthenticated ? /*#__PURE__*/React.createElement(UserDashboard, Object.assign({}, props, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 23\n        }\n      })) : /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 23\n        }\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    render: function render(props) {\n      return !isAuthenticated ? /*#__PURE__*/React.createElement(_NavigationItems, Object.assign({}, props, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 23\n        }\n      })) : /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/dashboard/\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 23\n        }\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 15\n    }\n  }))))));\n};\n\nexport default DesktopComponent;\nexport { Authorize };","map":{"version":3,"sources":["C:/Users/ACTIVANTS/Desktop/LMS Councellor/Activants_LMS_Counsellor/ATIVANTS_LMS_COUNSELLOR/src/MainComponents/DesktopComponent.js"],"names":["GetWidthOfComponent","React","useState","useEffect","_NavigationItems","_Promos","axios","Responsive","UserDashboard","Cookies","ToastContainer","toast","BrowserRouter","Router","Switch","Route","Redirect","Authorize","createContext","DesktopComponent","children","isAuthenticated","setIsAuthenticated","setAuth","boolean","checkAuthenticated","localStorage","jwtToken","fetch","method","headers","res","json","parseRes","response","setItem","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","console","error","message","onlyTablet","minWidth","props"],"mappings":"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","sourcesContent":["import GetWidthOfComponent from './GetWidthOfComponent'\r\nimport React, { useState, useEffect } from 'react'\r\nimport _NavigationItems from '../SecondaryComponents/Desktop/_NavigationItems'\r\nimport _Promos from '../SecondaryComponents/Desktop/_Promos'\r\nimport axios from 'axios'\r\nimport { Responsive } from 'semantic-ui-react'\r\nimport UserDashboard from '../SecondaryComponents/Desktop/UserDashboard/UserDashboard';\r\nimport Cookies from 'js-cookie';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\n\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Redirect\r\n} from \"react-router-dom\";\r\n\r\nconst Authorize = React.createContext();\r\n\r\nconst DesktopComponent = ({ children }) => {\r\n\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n\r\n  const setAuth = (boolean) => {\r\n    setIsAuthenticated(boolean);\r\n  }\r\n\r\n  const checkAuthenticated = async () => {\r\n    try {\r\n      if (localStorage.jwtToken) {\r\n        const res = await fetch(\"http://localhost:5000/auth/verify/\", {\r\n          method: \"GET\",\r\n          headers: { jwtToken: localStorage.jwtToken }\r\n        });\r\n        const parseRes = await res.json();\r\n        parseRes === true ? setIsAuthenticated(true) : setIsAuthenticated(false);\r\n      }\r\n      else {\r\n        const response = await fetch(\"http://localhost:5000/socialauth//google/validateCookie\", {\r\n          method: \"POST\",\r\n          headers: { \"Content-Type\": \"application/json\" },\r\n        });\r\n        const parseRes = await response.json()\r\n        if (parseRes.jwtToken) {\r\n          localStorage.setItem(\"jwtToken\", parseRes.jwtToken)\r\n          setAuth(true);\r\n          toast.success('login successfull!', {\r\n            position: \"top-right\",\r\n            autoClose: 3000,\r\n            hideProgressBar: false,\r\n            closeOnClick: true,\r\n            pauseOnHover: false,\r\n            draggable: true,\r\n            progress: '',\r\n          });\r\n        }\r\n      }\r\n    } catch (err) {\r\n      console.error(err.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    checkAuthenticated();\r\n  }, []);\r\n\r\n  return (\r\n    <Responsive getWidth={GetWidthOfComponent} minWidth={Responsive.onlyTablet.minWidth}>\r\n      <Router>\r\n        <div className=\"container\">\r\n          <Authorize.Provider value={setAuth}>\r\n            <Switch>\r\n              <Route exact path=\"/dashboard\" render=\r\n                {\r\n                  props => isAuthenticated ?\r\n                    (\r\n                      <UserDashboard {...props} />\r\n                    ) :\r\n                    (\r\n                      <Redirect to=\"/\" />\r\n                    )\r\n                }>\r\n              </Route>\r\n              <Route exact path=\"/\" render=\r\n                {\r\n                  props => !isAuthenticated ?\r\n                    (\r\n                      <_NavigationItems {...props} />\r\n                    ) :\r\n                    (\r\n                      <Redirect to=\"/dashboard/\" />\r\n                    )\r\n                }>\r\n              </Route>\r\n            </Switch>\r\n          </Authorize.Provider>\r\n        </div>\r\n      </Router>\r\n    </Responsive>\r\n  )\r\n\r\n}\r\n\r\nexport default DesktopComponent;\r\n\r\nexport {\r\n  Authorize\r\n}"]},"metadata":{},"sourceType":"module"}