{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\ACTIVANTS\\\\Desktop\\\\LMS Councellor\\\\Activants_LMS_Counsellor\\\\ATIVANTS_LMS_COUNSELLOR\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\ACTIVANTS\\\\Desktop\\\\LMS Councellor\\\\Activants_LMS_Counsellor\\\\ATIVANTS_LMS_COUNSELLOR\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\ACTIVANTS\\\\Desktop\\\\LMS Councellor\\\\Activants_LMS_Counsellor\\\\ATIVANTS_LMS_COUNSELLOR\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\ACTIVANTS\\\\Desktop\\\\LMS Councellor\\\\Activants_LMS_Counsellor\\\\ATIVANTS_LMS_COUNSELLOR\\\\src\\\\MainComponents\\\\DesktopComponent.js\";\n\nimport GetWidthOfComponent from './GetWidthOfComponent';\nimport React, { useState, useEffect } from 'react';\nimport _NavigationItems from '../SecondaryComponents/Desktop/_NavigationItems';\nimport _Promos from '../SecondaryComponents/Desktop/_Promos';\nimport axios from 'axios';\nimport { Responsive } from 'semantic-ui-react';\nimport UserDashboard from '../SecondaryComponents/Desktop/UserDashboard/UserDashboard';\nimport { BrowserRouter as Router, Switch, Route, Redirect } from \"react-router-dom\";\nvar Authorize = React.createContext();\n\nvar DesktopComponent = function DesktopComponent(_ref) {\n  var children = _ref.children;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isAuthenticated = _useState2[0],\n      setIsAuthenticated = _useState2[1];\n\n  var setAuth = function setAuth(boolean) {\n    setIsAuthenticated(boolean);\n  };\n\n  var checkAuthenticated = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var token, parseRes;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              console.log(\"tokennnnnn\", Response.headers[\"jwtToken\"]);\n              token = Response.headers[\"jwtToken\"];\n\n              if (!token) {\n                _context.next = 9;\n                break;\n              }\n\n              _context.next = 6;\n              return fetch(\"http://localhost:5000/auth/verify/\", {\n                method: \"GET\",\n                headers: {\n                  jwtToken: token\n                }\n              });\n\n            case 6:\n              res = _context.sent;\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.next = 11;\n              return fetch(\"http://localhost:5000/auth/verify/\", {\n                method: \"GET\",\n                headers: {\n                  jwtToken: localStorage.jwtToken\n                }\n              });\n\n            case 11:\n              res = _context.sent;\n\n            case 12:\n              _context.next = 14;\n              return res.json();\n\n            case 14:\n              parseRes = _context.sent;\n              console.log(parseRes);\n              parseRes === true ? setIsAuthenticated(true) : setIsAuthenticated(false);\n              _context.next = 22;\n              break;\n\n            case 19:\n              _context.prev = 19;\n              _context.t0 = _context[\"catch\"](0);\n              console.error(_context.t0.message);\n\n            case 22:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 19]]);\n    }));\n\n    return function checkAuthenticated() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    console.log(\"callllededdddd...\");\n    checkAuthenticated();\n  }, []);\n  return /*#__PURE__*/React.createElement(Responsive, {\n    getWidth: GetWidthOfComponent,\n    minWidth: Responsive.onlyTablet.minWidth,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Router, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Authorize.Provider, {\n    value: setAuth,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Switch, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/dashboard\",\n    render: function render(props) {\n      return isAuthenticated ? /*#__PURE__*/React.createElement(UserDashboard, Object.assign({}, props, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 23\n        }\n      })) : /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 23\n        }\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    render: function render(props) {\n      return !isAuthenticated ? /*#__PURE__*/React.createElement(_NavigationItems, Object.assign({}, props, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 23\n        }\n      })) : /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/dashboard/\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 23\n        }\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 15\n    }\n  }))))));\n};\n\nexport default DesktopComponent;\nexport { Authorize };","map":{"version":3,"sources":["C:/Users/ACTIVANTS/Desktop/LMS Councellor/Activants_LMS_Counsellor/ATIVANTS_LMS_COUNSELLOR/src/MainComponents/DesktopComponent.js"],"names":["GetWidthOfComponent","React","useState","useEffect","_NavigationItems","_Promos","axios","Responsive","UserDashboard","BrowserRouter","Router","Switch","Route","Redirect","Authorize","createContext","DesktopComponent","children","isAuthenticated","setIsAuthenticated","setAuth","boolean","checkAuthenticated","console","log","Response","headers","token","fetch","method","jwtToken","res","localStorage","json","parseRes","error","message","onlyTablet","minWidth","props"],"mappings":"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","sourcesContent":["import GetWidthOfComponent from './GetWidthOfComponent'\r\nimport React, { useState, useEffect } from 'react'\r\nimport _NavigationItems from '../SecondaryComponents/Desktop/_NavigationItems'\r\nimport _Promos from '../SecondaryComponents/Desktop/_Promos'\r\nimport axios from 'axios'\r\nimport { Responsive } from 'semantic-ui-react'\r\nimport UserDashboard from '../SecondaryComponents/Desktop/UserDashboard/UserDashboard';\r\n\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Redirect\r\n} from \"react-router-dom\";\r\n\r\nconst Authorize = React.createContext();\r\n\r\nconst DesktopComponent = ({ children }) => {\r\n\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n\r\n  const setAuth = (boolean) => {\r\n    setIsAuthenticated(boolean);\r\n  }\r\n\r\n  const checkAuthenticated = async () => {\r\n    try {\r\n      console.log(\"tokennnnnn\", Response.headers[\"jwtToken\"]);\r\n      const token = Response.headers[\"jwtToken\"];\r\n      if (token) {\r\n          res = await fetch(\"http://localhost:5000/auth/verify/\", {\r\n          method: \"GET\",\r\n          headers: { jwtToken: token }\r\n        });\r\n      }\r\n      else {\r\n          res = await fetch(\"http://localhost:5000/auth/verify/\", {\r\n          method: \"GET\",\r\n          headers: { jwtToken: localStorage.jwtToken }\r\n        });\r\n      }\r\n      const parseRes = await res.json();\r\n      console.log(parseRes);\r\n      parseRes === true ? setIsAuthenticated(true) : setIsAuthenticated(false);\r\n\r\n    } catch (err) {\r\n      console.error(err.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log(\"callllededdddd...\")\r\n    checkAuthenticated();\r\n  }, []);\r\n\r\n  return (\r\n    <Responsive getWidth={GetWidthOfComponent} minWidth={Responsive.onlyTablet.minWidth}>\r\n      <Router>\r\n        <div className=\"container\">\r\n          <Authorize.Provider value={setAuth}>\r\n            <Switch>\r\n              <Route exact path=\"/dashboard\" render=\r\n                {\r\n                  props => isAuthenticated ?\r\n                    (\r\n                      <UserDashboard {...props} />\r\n                    ) :\r\n                    (\r\n                      <Redirect to=\"/\" />\r\n                    )\r\n                }>\r\n              </Route>\r\n              <Route exact path=\"/\" render=\r\n                {\r\n                  props => !isAuthenticated ?\r\n                    (\r\n                      <_NavigationItems {...props} />\r\n                    ) :\r\n                    (\r\n                      <Redirect to=\"/dashboard/\" />\r\n                    )\r\n                }>\r\n              </Route>\r\n            </Switch>\r\n          </Authorize.Provider>\r\n        </div>\r\n      </Router>\r\n    </Responsive>\r\n  )\r\n\r\n}\r\n\r\nexport default DesktopComponent;\r\n\r\nexport {\r\n  Authorize\r\n}"]},"metadata":{},"sourceType":"module"}