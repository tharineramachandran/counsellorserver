{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Activants46\\\\Desktop\\\\githubLMS\\\\counsellorserver\\\\ATIVANTS_LMS_COUNSELLOR\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Activants46\\\\Desktop\\\\githubLMS\\\\counsellorserver\\\\ATIVANTS_LMS_COUNSELLOR\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"C:\\\\Users\\\\Activants46\\\\Desktop\\\\githubLMS\\\\counsellorserver\\\\ATIVANTS_LMS_COUNSELLOR\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\Activants46\\\\Desktop\\\\githubLMS\\\\counsellorserver\\\\ATIVANTS_LMS_COUNSELLOR\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\Activants46\\\\Desktop\\\\githubLMS\\\\counsellorserver\\\\ATIVANTS_LMS_COUNSELLOR\\\\src\\\\SecondaryComponents\\\\Desktop\\\\UserDashboard\\\\layout\\\\CounsellorChangeSessionModel.js\";\nimport React, { useState, useContext, useEffect } from 'react';\nimport { Button, Form, Header, Image, Input, Dropdown, Grid, Message, Segment, Card, Img, Icon, Table, Label, Container, List, Popup } from \"semantic-ui-react\";\nimport { ToastContainer, toast } from 'react-toastify';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport DatePicker from 'react-datepicker';\n\nvar axios = require('axios');\n\nvar daysNotAvailableList = [];\n\nvar ChangeSession = /*#__PURE__*/function (_React$Component) {\n  _inherits(ChangeSession, _React$Component);\n\n  var _super = _createSuper(ChangeSession);\n\n  function ChangeSession(props) {\n    var _this;\n\n    _classCallCheck(this, ChangeSession);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      person: [],\n      sessionDate: '',\n      sessionStart: '',\n      sessionEnd: '',\n      startDate: \"\",\n      slots: [],\n      slotValue: '',\n      formWarning: '',\n      slotOptions: [],\n      addedSessions: []\n    };\n\n    _this.isWeekday = function (date) {\n      var day = date.getDay();\n      return day !== 0 && !daysNotAvailableList.includes(day);\n    };\n\n    _this.slotChange = function (e, data) {\n      console.log(\"---------------------------------\");\n\n      _this.setState({\n        slotValue: data.value,\n        formWarning: ''\n      });\n\n      console.log(data);\n    };\n\n    _this.onDateChange = function (date) {\n      console.log([\"ddddddddddddddddd\", date]);\n\n      _this.setState({\n        startDate: date,\n        slotValue: date\n      });\n\n      var slot = [];\n      var slotOptions = [];\n\n      if (date.getDay() == 1) {\n        slot = _this.state.person.counselling_monday;\n      }\n\n      if (date.getDay() == 2) {\n        slot = _this.state.person.counselling_tuesday;\n      }\n\n      if (date.getDay() == 3) {\n        slot = _this.state.person.counselling_wednesday;\n      }\n\n      if (date.getDay() == 4) {\n        slot = _this.state.person.counselling_thursday;\n      }\n\n      if (date.getDay() == 5) {\n        slot = _this.state.person.counselling_friday;\n      }\n\n      if (date.getDay() == 6) {\n        slot = _this.state.person.counselling_saturday;\n      }\n\n      for (var details in slot) {\n        slotOptions.push({\n          key: slot[details].id,\n          value: slot[details].id,\n          text: slot[details].ct_from + \" to \" + slot[details].ct_to\n        });\n      }\n\n      _this.setState({\n        slots: slot,\n        slotOptions: slotOptions,\n        formWarning: '',\n        slotValue: ''\n      });\n    };\n\n    _this.addDate = function () {\n      var sessionDetails = undefined;\n\n      if (_this.state.slotValue && _this.state.startDate) {\n        console.log(_this.state.slots);\n\n        for (var session in _this.state.slots) {\n          if (_this.state.slots[session].id == _this.state.slotValue) {\n            sessionDetails = _this.state.slots[session];\n            break;\n          }\n        }\n\n        var data = {\n          strdate: _this.state.startDate.toString(),\n          session: _this.state.slotValue,\n          date: _this.state.startDate,\n          userId: _this.props.UserID,\n          counsellorId: _this.props.CounsellorID,\n          sessionDetails: sessionDetails\n        };\n        var stateAdded = _this.state.addedSessions;\n        var sameValue = true;\n\n        if (stateAdded.length > 0) {\n          stateAdded.forEach(checkForDuplicate);\n\n          function checkForDuplicate(item, index) {\n            if (item.strdate == data.strdate && item.sessionDetails.ct_to == data.sessionDetails.ct_to && item.sessionDetails.ct_from == data.sessionDetails.ct_from) {\n              sameValue = false;\n            }\n          }\n        }\n\n        if (sameValue) {\n          stateAdded.push(data);\n        } else {\n          _this.setState({\n            formWarning: \"Same session timing selected\"\n          });\n        }\n\n        _this.setState({\n          addedSessions: stateAdded\n        });\n      } else {\n        _this.setState({\n          formWarning: \"Invalid form\"\n        });\n      }\n    };\n\n    _this.submitRequest = function () {\n      var headers = {\n        jwtToken: localStorage.jwtToken\n      };\n      var data = {\n        requestID: _this.props.RequestID,\n        session: _this.state.addedSessions\n      };\n      axios.post('http://localhost:5000/session/sessionchange', data, {\n        headers: headers\n      }).then(function (res) {\n        console.log(res);\n        toast.success('Change request sent to counselee', {\n          position: \"top-right\",\n          autoClose: 3000,\n          hideProgressBar: true,\n          closeOnClick: true,\n          pauseOnHover: false,\n          draggable: true,\n          progress: ''\n        });\n        var els = document.getElementsByClassName('appBanner');\n\n        for (var i = 0; i < els.length; i++) {\n          els[i].style.display = els[i].style.display == \"none\" ? \"block\" : \"none\";\n        }\n      }).catch(function (error) {\n        console.log(error);\n        toast.error('an error occured', {\n          position: \"top-right\",\n          autoClose: 3000,\n          hideProgressBar: true,\n          closeOnClick: true,\n          pauseOnHover: false,\n          draggable: true,\n          progress: ''\n        });\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(ChangeSession, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var slotOptions = [{\n        key: 'af',\n        value: 'af',\n        text: 'Afghanistan'\n      }, {\n        key: 'ax',\n        value: 'ax',\n        text: 'Aland Islands'\n      }, {\n        key: 'al',\n        value: 'al',\n        text: 'Albania'\n      }, {\n        key: 'dz',\n        value: 'dz',\n        text: 'Algeria'\n      }];\n      axios.get(\"http://localhost:5000/Counsellor/GetSingleCounsellorDetails/\" + this.props.CounsellorID).then(function (res) {\n        console.log(res);\n        var person = res.data.counsellor;\n\n        _this2.setState({\n          person: person,\n          slotOptions: slotOptions,\n          formWarning: ''\n        });\n\n        if (_this2.state.person) {\n          if (_this2.state.person.counselling_monday.length < 1) {\n            daysNotAvailableList.push(1);\n          }\n\n          if (_this2.state.person.counselling_tuesday.length < 1) {\n            daysNotAvailableList.push(2);\n          }\n\n          if (_this2.state.person.counselling_wednesday.length < 1) {\n            daysNotAvailableList.push(3);\n          }\n\n          if (_this2.state.person.counselling_thursday.length < 1) {\n            daysNotAvailableList.push(4);\n          }\n\n          if (_this2.state.person.counselling_friday.length < 1) {\n            daysNotAvailableList.push(5);\n          }\n\n          if (_this2.state.person.counselling_saturday.length < 1) {\n            daysNotAvailableList.push(6);\n          }\n        }\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return /*#__PURE__*/React.createElement(Container, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"appBanner\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 10\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 9\n        }\n      }, \"Pick a date for the counselling session  \"), /*#__PURE__*/React.createElement(DatePicker, {\n        selected: this.state.startDate,\n        onChange: this.onDateChange,\n        filterDate: this.isWeekday,\n        onCalendarClose: this.handleCalendarClose,\n        placeholderText: \"Select a day for meeting \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 9\n        }\n      }), this.state.slots.length > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 41\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 11\n        }\n      }, \"Choose a slot on the day\"), /*#__PURE__*/React.createElement(Dropdown, {\n        placeholder: \"Add slot timing\",\n        fluid: true,\n        selection: true,\n        value: this.state.slotValue,\n        onChange: this.slotChange,\n        options: this.state.slotOptions,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }\n      })) : /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 12\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          color: 'red'\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 9\n        }\n      }, this.state.formWarning), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        class: \"ui button\",\n        onClick: this.addDate,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 249,\n          columnNumber: 9\n        }\n      }, \"Add Date\")), /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 9\n        }\n      }, \"requested counselling session  change dates\"), this.state.addedSessions.length > 0 ? /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 49\n        }\n      }, this.state.addedSessions.map(function (details, index) {\n        return /*#__PURE__*/React.createElement(\"p\", {\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 13\n          }\n        }, /*#__PURE__*/React.createElement(\"span\", {\n          __self: _this3,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 15\n          }\n        }, \" \", details.strdate, \" ------- \", details.sessionDetails.ct_from, \"  ------- \", details.sessionDetails.ct_to));\n      })) : /*#__PURE__*/React.createElement(\"strong\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 12\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"appBanner\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 1\n        }\n      }, /*#__PURE__*/React.createElement(\"button\", {\n        class: \"ui button\",\n        onClick: this.submitRequest,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 1\n        }\n      }, \"Submit Change Request\")));\n    }\n  }]);\n\n  return ChangeSession;\n}(React.Component);\n\nexport default ChangeSession;","map":{"version":3,"sources":["C:/Users/Activants46/Desktop/githubLMS/counsellorserver/ATIVANTS_LMS_COUNSELLOR/src/SecondaryComponents/Desktop/UserDashboard/layout/CounsellorChangeSessionModel.js"],"names":["React","useState","useContext","useEffect","Button","Form","Header","Image","Input","Dropdown","Grid","Message","Segment","Card","Img","Icon","Table","Label","Container","List","Popup","ToastContainer","toast","DatePicker","axios","require","daysNotAvailableList","ChangeSession","props","state","person","sessionDate","sessionStart","sessionEnd","startDate","slots","slotValue","formWarning","slotOptions","addedSessions","isWeekday","date","day","getDay","includes","slotChange","e","data","console","log","setState","value","onDateChange","slot","counselling_monday","counselling_tuesday","counselling_wednesday","counselling_thursday","counselling_friday","counselling_saturday","details","push","key","id","text","ct_from","ct_to","addDate","sessionDetails","undefined","session","strdate","toString","userId","UserID","counsellorId","CounsellorID","stateAdded","sameValue","length","forEach","checkForDuplicate","item","index","submitRequest","headers","jwtToken","localStorage","requestID","RequestID","post","then","res","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","els","document","getElementsByClassName","i","style","display","catch","error","get","counsellor","handleCalendarClose","color","map","Component"],"mappings":"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","sourcesContent":["\r\nimport React, { useState, useContext, useEffect } from 'react';\r\nimport {\r\n  Button,\r\n  Form,\r\n  Header,\r\n  Image,\r\n  Input, Dropdown, Grid,\r\n  Message,\r\n  Segment, Card, Img, Icon,\r\n  Table, Label, Container, List, Popup\r\n} from \"semantic-ui-react\";\r\n\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport DatePicker from 'react-datepicker';\r\nconst axios = require('axios');\r\n\r\nvar daysNotAvailableList = [];\r\nclass ChangeSession extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n  }\r\n\r\n  state = {\r\n    person: [],\r\n    sessionDate: '',\r\n    sessionStart: '',\r\n    sessionEnd: '',\r\n    startDate: \"\",\r\n    slots: [],\r\n    slotValue: '',\r\n    formWarning: '',\r\n    slotOptions: [],\r\n    addedSessions: []\r\n  }\r\n\r\n  componentDidMount() {\r\n    const slotOptions = [\r\n      { key: 'af', value: 'af', text: 'Afghanistan' },\r\n      { key: 'ax', value: 'ax', text: 'Aland Islands' },\r\n      { key: 'al', value: 'al', text: 'Albania' },\r\n      { key: 'dz', value: 'dz', text: 'Algeria' },\r\n    ]\r\n    axios.get(`http://localhost:5000/Counsellor/GetSingleCounsellorDetails/` + this.props.CounsellorID\r\n    )\r\n      .then(res => {\r\n        console.log(res);\r\n        const person = res.data.counsellor;\r\n        this.setState({ person: person, slotOptions: slotOptions, formWarning: '' });\r\n\r\n        if (this.state.person ) {\r\n\r\n        if (this.state.person.counselling_monday.length < 1) {\r\n\r\n          daysNotAvailableList.push(1);\r\n        }\r\n        if (this.state.person.counselling_tuesday.length < 1) {\r\n\r\n          daysNotAvailableList.push(2);\r\n        } if (this.state.person.counselling_wednesday.length < 1) {\r\n\r\n          daysNotAvailableList.push(3);\r\n        } if (this.state.person.counselling_thursday.length < 1) {\r\n\r\n          daysNotAvailableList.push(4);\r\n\r\n        } if (this.state.person.counselling_friday.length < 1) {\r\n\r\n          daysNotAvailableList.push(5);\r\n        }\r\n        if (this.state.person.counselling_saturday.length < 1) {\r\n\r\n          daysNotAvailableList.push(6);\r\n        }}\r\n\r\n      })\r\n  }\r\n  isWeekday = date => {\r\n    const day = date.getDay();\r\n    return day !== 0 && !(daysNotAvailableList.includes(day));\r\n  };\r\n  slotChange = (e, data) => {\r\n    console.log(\"---------------------------------\");\r\n    this.setState({ slotValue: data.value, formWarning: '' });\r\n\r\n    console.log(data);\r\n  };\r\n \r\n  onDateChange = (date) => {\r\n    console.log([\"ddddddddddddddddd\", date]);\r\n    this.setState({ startDate: date, slotValue: date });\r\n    var slot = [];\r\n    var slotOptions = [];\r\n\r\n    if (date.getDay() == 1) {\r\n\r\n      slot = this.state.person.counselling_monday;\r\n    }\r\n    if (date.getDay() == 2) {\r\n\r\n      slot = this.state.person.counselling_tuesday;\r\n    }\r\n    if (date.getDay() == 3) {\r\n\r\n      slot = this.state.person.counselling_wednesday;\r\n    }\r\n    if (date.getDay() == 4) {\r\n\r\n      slot = this.state.person.counselling_thursday;\r\n    }\r\n\r\n    if (date.getDay() == 5) {\r\n\r\n      slot = this.state.person.counselling_friday;\r\n    } if (date.getDay() == 6) {\r\n\r\n      slot = this.state.person.counselling_saturday;\r\n    }\r\n    for (var details in slot) {\r\n\r\n      slotOptions.push({ key: slot[details].id, value: slot[details].id, text: slot[details].ct_from + \" to \" + slot[details].ct_to });\r\n\r\n    }\r\n\r\n    this.setState({ slots: slot, slotOptions: slotOptions, formWarning: '', slotValue: '' });\r\n  };\r\n\r\n  addDate = () => {\r\n    var sessionDetails = undefined;\r\n    if (this.state.slotValue && this.state.startDate) {\r\n      console.log(this.state.slots);\r\n      for (var session in this.state.slots) {\r\n\r\n        if (this.state.slots[session].id == this.state.slotValue) {\r\n\r\n          sessionDetails = this.state.slots[session];\r\n          break;\r\n        }\r\n      }\r\n      const data = {\r\n        strdate: this.state.startDate.toString(),\r\n        session: this.state.slotValue,\r\n        date: this.state.startDate,\r\n        userId: this.props.UserID,\r\n        counsellorId: this.props.CounsellorID,\r\n        sessionDetails: sessionDetails\r\n      };\r\n\r\n      let stateAdded = this.state.addedSessions; \r\n      var sameValue= true;\r\n      if (stateAdded.length > 0) {\r\n\r\n        stateAdded.forEach(checkForDuplicate);\r\n\r\n        function checkForDuplicate(item, index) {\r\n\r\n          \r\n          if ((item.strdate == data.strdate && item.sessionDetails.ct_to == data.sessionDetails.ct_to && item.sessionDetails.ct_from == data.sessionDetails.ct_from)) {\r\n            sameValue= false;\r\n          } \r\n           \r\n        }\r\n      }\r\n      if(sameValue) {  \r\n        stateAdded.push(data); \r\n       \r\n      }else{ this.setState({ formWarning: \"Same session timing selected\" });}\r\n      this.setState({ addedSessions: stateAdded }); \r\n    } else {\r\n\r\n      this.setState({ formWarning: \"Invalid form\" });\r\n    }\r\n  };\r\n\r\n  submitRequest= () => { \r\n    const headers =  {\r\n      jwtToken: localStorage.jwtToken\r\n    }\r\n    const data =  {\r\n      requestID: this.props.RequestID,\r\n      session: this.state.addedSessions\r\n    }\r\n    axios.post('http://localhost:5000/session/sessionchange',  data, {\r\n      headers: headers\r\n    })\r\n      .then((res) => {\r\n          console.log(res); \r\n          toast.success('Change request sent to counselee', {\r\n            position: \"top-right\",\r\n            autoClose: 3000,\r\n            hideProgressBar: true,\r\n            closeOnClick: true,\r\n            pauseOnHover: false,\r\n            draggable: true,\r\n            progress: '',\r\n          });\r\n          var els = document.getElementsByClassName('appBanner');\r\n          for (var i = 0; i < els.length; i++) {\r\n              els[i].style.display = els[i].style.display == \"none\" ? \"block\" : \"none\";\r\n          }\r\n\r\n      })\r\n      .catch(function (error) {\r\n          console.log(error);\r\n          toast.error('an error occured', {\r\n            position: \"top-right\",\r\n            autoClose: 3000,\r\n            hideProgressBar: true,\r\n            closeOnClick: true,\r\n            pauseOnHover: false,\r\n            draggable: true,\r\n            progress: '',\r\n          });\r\n      }); \r\n  }\r\n\r\n  render() {\r\n    return (\r\n\r\n      <Container>\r\n         <div  className=\"appBanner\"  >\r\n        <h3>Pick a date for the counselling session  </h3>\r\n\r\n        <DatePicker\r\n          selected={this.state.startDate}\r\n          onChange={this.onDateChange}\r\n          filterDate={this.isWeekday}\r\n          onCalendarClose={this.handleCalendarClose}\r\n          placeholderText=\"Select a day for meeting \" />\r\n\r\n\r\n\r\n        {this.state.slots.length > 0 ? (<div>\r\n          < br />\r\n          <h3>Choose a slot on the day</h3>\r\n          <Dropdown placeholder='Add slot timing'\r\n            fluid\r\n            selection value={this.state.slotValue} onChange={this.slotChange} options={this.state.slotOptions} />\r\n        </div>) :\r\n          (<strong>\r\n\r\n          </strong>)\r\n        }\r\n        < br />\r\n        <p style={{ color: 'red' }}>{this.state.formWarning}</p>\r\n        < br />\r\n        <button  class=\"ui button\" onClick={this.addDate}>Add Date</button>\r\n\r\n\r\n        </div>\r\n        <h3>requested counselling session  change dates</h3>\r\n\r\n        {this.state.addedSessions.length > 0 ? (<div>\r\n          {this.state.addedSessions.map((details, index) => (\r\n            <p>\r\n              <span> {details.strdate} ------- {details.sessionDetails.ct_from}  ------- {details.sessionDetails.ct_to}</span>\r\n            </p>\r\n          ))}\r\n        </div>\r\n        ) :\r\n          (<strong>\r\n\r\n          </strong>)\r\n        }\r\n<div className=\"appBanner\"    >\r\n<button   class=\"ui button\" onClick={this.submitRequest}>Submit Change Request</button>\r\n</div>\r\n</Container>\r\n\r\n    )\r\n  }\r\n}\r\n\r\nexport default ChangeSession;\r\n\r\n"]},"metadata":{},"sourceType":"module"}