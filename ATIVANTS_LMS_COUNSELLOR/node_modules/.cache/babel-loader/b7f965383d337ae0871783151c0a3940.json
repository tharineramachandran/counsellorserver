{"ast":null,"code":"import _regeneratorRuntime from \"C:\\\\Users\\\\ACTIVANTS\\\\Desktop\\\\LMS Councellor\\\\Activants_LMS_Counsellor\\\\ATIVANTS_LMS_COUNSELLOR\\\\node_modules\\\\@babel\\\\runtime/regenerator\";\nimport _readOnlyError from \"C:\\\\Users\\\\ACTIVANTS\\\\Desktop\\\\LMS Councellor\\\\Activants_LMS_Counsellor\\\\ATIVANTS_LMS_COUNSELLOR\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/readOnlyError\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\ACTIVANTS\\\\Desktop\\\\LMS Councellor\\\\Activants_LMS_Counsellor\\\\ATIVANTS_LMS_COUNSELLOR\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"C:\\\\Users\\\\ACTIVANTS\\\\Desktop\\\\LMS Councellor\\\\Activants_LMS_Counsellor\\\\ATIVANTS_LMS_COUNSELLOR\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\ACTIVANTS\\\\Desktop\\\\LMS Councellor\\\\Activants_LMS_Counsellor\\\\ATIVANTS_LMS_COUNSELLOR\\\\src\\\\MainComponents\\\\DesktopComponent.js\";\n\nimport GetWidthOfComponent from './GetWidthOfComponent';\nimport React, { useState, useEffect } from 'react';\nimport _NavigationItems from '../SecondaryComponents/Desktop/_NavigationItems';\nimport _Promos from '../SecondaryComponents/Desktop/_Promos';\nimport axios from 'axios';\nimport { Responsive } from 'semantic-ui-react';\nimport UserDashboard from '../SecondaryComponents/Desktop/UserDashboard/UserDashboard';\nimport { BrowserRouter as Router, Switch, Route, Redirect } from \"react-router-dom\";\nvar Authorize = React.createContext();\n\nvar DesktopComponent = function DesktopComponent(_ref) {\n  var children = _ref.children;\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isAuthenticated = _useState2[0],\n      setIsAuthenticated = _useState2[1];\n\n  var setAuth = function setAuth(boolean) {\n    setIsAuthenticated(boolean);\n  };\n\n  var checkAuthenticated = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n      var search, params, res, token, parseRes;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              search = window.location.search;\n              params = new URLSearchParams(search);\n              res = null;\n              console.log(\"paramas\", params);\n              token = params.get('jwtToken');\n              console.log(\"tokennnnnn\", params);\n\n              if (!token) {\n                _context.next = 14;\n                break;\n              }\n\n              _readOnlyError(\"res\");\n\n              _context.next = 11;\n              return fetch(\"http://localhost:5000/auth/verify/\", {\n                method: \"GET\",\n                headers: {\n                  jwtToken: token\n                }\n              });\n\n            case 11:\n              res = _context.sent;\n              _context.next = 18;\n              break;\n\n            case 14:\n              _readOnlyError(\"res\");\n\n              _context.next = 17;\n              return fetch(\"http://localhost:5000/auth/verify/\", {\n                method: \"GET\",\n                headers: {\n                  jwtToken: localStorage.jwtToken\n                }\n              });\n\n            case 17:\n              res = _context.sent;\n\n            case 18:\n              _context.next = 20;\n              return res.json();\n\n            case 20:\n              parseRes = _context.sent;\n              console.log(parseRes);\n              parseRes === true ? setIsAuthenticated(true) : setIsAuthenticated(false);\n              _context.next = 28;\n              break;\n\n            case 25:\n              _context.prev = 25;\n              _context.t0 = _context[\"catch\"](0);\n              console.error(_context.t0.message);\n\n            case 28:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 25]]);\n    }));\n\n    return function checkAuthenticated() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    console.log(\"callllededdddd...\");\n    checkAuthenticated();\n  }, []);\n  return /*#__PURE__*/React.createElement(Responsive, {\n    getWidth: GetWidthOfComponent,\n    minWidth: Responsive.onlyTablet.minWidth,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Router, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Authorize.Provider, {\n    value: setAuth,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Switch, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/dashboard\",\n    render: function render(props) {\n      return isAuthenticated ? /*#__PURE__*/React.createElement(UserDashboard, Object.assign({}, props, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 23\n        }\n      })) : /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 23\n        }\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    render: function render(props) {\n      return !isAuthenticated ? /*#__PURE__*/React.createElement(_NavigationItems, Object.assign({}, props, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 23\n        }\n      })) : /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/dashboard/\",\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84,\n          columnNumber: 23\n        }\n      });\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 15\n    }\n  }))))));\n};\n\nexport default DesktopComponent;\nexport { Authorize };","map":{"version":3,"sources":["C:/Users/ACTIVANTS/Desktop/LMS Councellor/Activants_LMS_Counsellor/ATIVANTS_LMS_COUNSELLOR/src/MainComponents/DesktopComponent.js"],"names":["GetWidthOfComponent","React","useState","useEffect","_NavigationItems","_Promos","axios","Responsive","UserDashboard","BrowserRouter","Router","Switch","Route","Redirect","Authorize","createContext","DesktopComponent","children","isAuthenticated","setIsAuthenticated","setAuth","boolean","checkAuthenticated","search","window","location","params","URLSearchParams","res","console","log","token","get","fetch","method","headers","jwtToken","localStorage","json","parseRes","error","message","onlyTablet","minWidth","props"],"mappings":"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","sourcesContent":["import GetWidthOfComponent from './GetWidthOfComponent'\r\nimport React, { useState, useEffect } from 'react'\r\nimport _NavigationItems from '../SecondaryComponents/Desktop/_NavigationItems'\r\nimport _Promos from '../SecondaryComponents/Desktop/_Promos'\r\nimport axios from 'axios'\r\nimport { Responsive } from 'semantic-ui-react'\r\nimport UserDashboard from '../SecondaryComponents/Desktop/UserDashboard/UserDashboard';\r\n\r\nimport {\r\n  BrowserRouter as Router,\r\n  Switch,\r\n  Route,\r\n  Redirect\r\n} from \"react-router-dom\";\r\n\r\nconst Authorize = React.createContext();\r\n\r\nconst DesktopComponent = ({ children }) => {\r\n\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n\r\n  const setAuth = (boolean) => {\r\n    setIsAuthenticated(boolean);\r\n  }\r\n\r\n  const checkAuthenticated = async () => {\r\n    try {\r\n      let search = window.location.search;\r\n      let params = new URLSearchParams(search);\r\n      const res = null;\r\n      console.log(\"paramas\", params);\r\n      let token = params.get('jwtToken');\r\n      console.log(\"tokennnnnn\", params);\r\n      if (token) {\r\n          res = await fetch(\"http://localhost:5000/auth/verify/\", {\r\n          method: \"GET\",\r\n          headers: { jwtToken: token }\r\n        });\r\n      }\r\n      else {\r\n          res = await fetch(\"http://localhost:5000/auth/verify/\", {\r\n          method: \"GET\",\r\n          headers: { jwtToken: localStorage.jwtToken }\r\n        });\r\n      }\r\n      const parseRes = await res.json();\r\n      console.log(parseRes);\r\n      parseRes === true ? setIsAuthenticated(true) : setIsAuthenticated(false);\r\n\r\n    } catch (err) {\r\n      console.error(err.message);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    console.log(\"callllededdddd...\")\r\n    checkAuthenticated();\r\n  }, []);\r\n\r\n  return (\r\n    <Responsive getWidth={GetWidthOfComponent} minWidth={Responsive.onlyTablet.minWidth}>\r\n      <Router>\r\n        <div className=\"container\">\r\n          <Authorize.Provider value={setAuth}>\r\n            <Switch>\r\n              <Route exact path=\"/dashboard\" render=\r\n                {\r\n                  props => isAuthenticated ?\r\n                    (\r\n                      <UserDashboard {...props} />\r\n                    ) :\r\n                    (\r\n                      <Redirect to=\"/\" />\r\n                    )\r\n                }>\r\n              </Route>\r\n              <Route exact path=\"/\" render=\r\n                {\r\n                  props => !isAuthenticated ?\r\n                    (\r\n                      <_NavigationItems {...props} />\r\n                    ) :\r\n                    (\r\n                      <Redirect to=\"/dashboard/\" />\r\n                    )\r\n                }>\r\n              </Route>\r\n            </Switch>\r\n          </Authorize.Provider>\r\n        </div>\r\n      </Router>\r\n    </Responsive>\r\n  )\r\n\r\n}\r\n\r\nexport default DesktopComponent;\r\n\r\nexport {\r\n  Authorize\r\n}"]},"metadata":{},"sourceType":"module"}