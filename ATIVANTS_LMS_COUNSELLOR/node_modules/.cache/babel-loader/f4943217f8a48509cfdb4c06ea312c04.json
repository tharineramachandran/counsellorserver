{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Activants46\\\\Desktop\\\\githubLMS\\\\counsellorserver\\\\ATIVANTS_LMS_COUNSELLOR\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Activants46\\\\Desktop\\\\githubLMS\\\\counsellorserver\\\\ATIVANTS_LMS_COUNSELLOR\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _inherits from \"C:\\\\Users\\\\Activants46\\\\Desktop\\\\githubLMS\\\\counsellorserver\\\\ATIVANTS_LMS_COUNSELLOR\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\Activants46\\\\Desktop\\\\githubLMS\\\\counsellorserver\\\\ATIVANTS_LMS_COUNSELLOR\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\Activants46\\\\Desktop\\\\githubLMS\\\\counsellorserver\\\\ATIVANTS_LMS_COUNSELLOR\\\\src\\\\SecondaryComponents\\\\Desktop\\\\UserDashboard\\\\layout\\\\ChangePasswordModel.js\";\nimport React, { useState, useContext, useEffect } from 'react';\nimport { Button, Form, Header, Image, Input, Dropdown, Grid, Message, Segment, Card, Img, Icon, Table, Label, Container, List, Popup } from \"semantic-ui-react\";\nimport { ToastContainer, toast } from 'react-toastify';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport DatePicker from 'react-datepicker';\n\nvar axios = require('axios');\n\nvar daysNotAvailableList = [];\n\nvar ChangePassword = /*#__PURE__*/function (_React$Component) {\n  _inherits(ChangePassword, _React$Component);\n\n  var _super = _createSuper(ChangePassword);\n\n  function ChangePassword(props) {\n    var _this;\n\n    _classCallCheck(this, ChangePassword);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      body: false,\n      subject: '',\n      catagory: '',\n      formWarning: '',\n      slotOptions: [],\n      message: '',\n      password: '',\n      color: 'blue',\n      code: ''\n    };\n\n    _this.submitRequest = function () {\n      var sessionDetails = undefined;\n      console.log([_this.state.subject]);\n\n      if (_this.state.subject) {\n        var data = {\n          email: _this.state.subject\n        };\n        console.log(data);\n        axios.post(\"http://localhost:5000/password/requestChange\", data).then(function (res) {\n          console.log(res);\n          console.log(res.data);\n          sessionDetails = res.data;\n\n          _this.results(res.data.code, res.data.message, \"\", \"blue\");\n        }).catch(function (error) {\n          if (error.response) {\n            _this.results(false, \"Unsuccessful to resent password\", _this.state.subject, \"red\");\n          }\n        });\n      } else {\n        _this.setState({\n          catagory: \"Invalid form\",\n          color: 'red'\n        });\n      }\n    };\n\n    _this.submitCode = function () {\n      console.log(_this.state.code);\n\n      if (_this.state.code) {\n        var data = {\n          password: _this.state.password,\n          code: _this.state.code\n        };\n        console.log(data);\n        axios.post(\"http://localhost:5000/password/reset\", data).then(function (res) {\n          var parseRes = res.data;\n\n          if (parseRes.jwtToken) {\n            localStorage.setItem(\"jwtToken\", parseRes.jwtToken);\n            localStorage.setItem(\"isCounsellor\", parseRes.isCounsellor);\n            localStorage.setItem(\"userID\", parseRes.userID);\n            toast.success('Password Change Successful', {\n              position: \"top-right\",\n              autoClose: 3000,\n              hideProgressBar: true,\n              closeOnClick: true,\n              pauseOnHover: false,\n              draggable: true,\n              progress: ''\n            });\n            window.location = \"http://localhost:3000/dashboard\";\n          } else {\n            _this.results(true, \"Invalid password change code \", \"\", \"red\");\n          }\n        }).catch(function (error) {\n          _this.results(true, \"Invalid password change code \", \"\", \"red\");\n        });\n      } else {\n        _this.setState({\n          catagory: \"Invalid form\",\n          color: 'red'\n        });\n      }\n    };\n\n    _this.results = function (body, catagory, subject, color) {\n      console.log(\"this.state\");\n\n      _this.setState({\n        body: body,\n        catagory: catagory,\n        subject: subject,\n        color: color\n      });\n    };\n\n    _this._onKeyUpSubject = function (e) {\n      var value = e.target.value.toLowerCase();\n      console.log(value);\n\n      _this.setState({\n        subject: value\n      });\n    };\n\n    _this._onKeyUpCode = function (e) {\n      var value = e.target.value.toLowerCase();\n      console.log(value);\n\n      _this.setState({\n        code: value\n      });\n    };\n\n    _this._onKeyUpMessage = function (e) {\n      var value = e.target.value.toLowerCase();\n      console.log(value);\n\n      _this.setState({\n        message: value\n      });\n    };\n\n    _this._onKeyUpPassword = function (e) {\n      var value = e.target.value.toLowerCase();\n      console.log(value);\n\n      _this.setState({\n        password: value\n      });\n    };\n\n    return _this;\n  }\n\n  _createClass(ChangePassword, [{\n    key: \"render\",\n    value: function render() {\n      return /*#__PURE__*/React.createElement(Container, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 7\n        }\n      }, \" \", /*#__PURE__*/React.createElement(Segment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175,\n          columnNumber: 19\n        }\n      }, this.state.body ? /*#__PURE__*/React.createElement(Form, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 1\n        }\n      }, /*#__PURE__*/React.createElement(Form.Group, {\n        widths: \"equal\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(Form.Input, {\n        label: \"Code\",\n        onChange: this._onKeyUpCode,\n        control: \"input\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(Form.Input, {\n        label: \"Password\",\n        type: \"password\",\n        control: \"input\",\n        onChange: this._onKeyUpPassword,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 186,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 9\n        }\n      })), /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          color: this.state.color\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 7\n        }\n      }, this.state.catagory), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        class: \"ui button\",\n        onClick: this.submitCode,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 9\n        }\n      }, \"Submit\")) : /*#__PURE__*/React.createElement(Form, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 12\n        }\n      }, /*#__PURE__*/React.createElement(Form.Group, {\n        widths: \"equal\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(Form.Input, {\n        label: \"Email\",\n        type: \"Email\",\n        onChange: this._onKeyUpSubject,\n        name: \"s\",\n        id: \"s\",\n        placeholder: \"Email\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 205,\n          columnNumber: 15\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 15\n        }\n      })), /*#__PURE__*/React.createElement(\"p\", {\n        style: {\n          color: this.state.color\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 13\n        }\n      }, this.state.catagory), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217,\n          columnNumber: 11\n        }\n      }), /*#__PURE__*/React.createElement(\"button\", {\n        class: \"ui button\",\n        onClick: this.submitRequest,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 11\n        }\n      }, \"Submit\"))));\n    }\n  }]);\n\n  return ChangePassword;\n}(React.Component);\n\nexport default ChangePassword;","map":{"version":3,"sources":["C:/Users/Activants46/Desktop/githubLMS/counsellorserver/ATIVANTS_LMS_COUNSELLOR/src/SecondaryComponents/Desktop/UserDashboard/layout/ChangePasswordModel.js"],"names":["React","useState","useContext","useEffect","Button","Form","Header","Image","Input","Dropdown","Grid","Message","Segment","Card","Img","Icon","Table","Label","Container","List","Popup","ToastContainer","toast","DatePicker","axios","require","daysNotAvailableList","ChangePassword","props","state","body","subject","catagory","formWarning","slotOptions","message","password","color","code","submitRequest","sessionDetails","undefined","console","log","data","email","post","then","res","results","catch","error","response","setState","submitCode","parseRes","jwtToken","localStorage","setItem","isCounsellor","userID","success","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","window","location","_onKeyUpSubject","e","value","target","toLowerCase","_onKeyUpCode","_onKeyUpMessage","_onKeyUpPassword","Component"],"mappings":"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","sourcesContent":["\r\nimport React, { useState, useContext, useEffect } from 'react';\r\nimport {\r\n  Button,\r\n  Form,\r\n  Header,\r\n  Image,\r\n  Input, Dropdown, Grid,\r\n  Message,\r\n  Segment, Card, Img, Icon,\r\n  Table, Label, Container, List, Popup\r\n} from \"semantic-ui-react\";\r\n \r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport \"react-datepicker/dist/react-datepicker.css\";\r\nimport DatePicker from 'react-datepicker';\r\nconst axios = require('axios'); \r\nvar daysNotAvailableList = [];\r\nclass ChangePassword extends React.Component {\r\n  constructor(props) {\r\n    super(props)\r\n\r\n  }\r\n\r\n  state = {\r\n    body: false,\r\n    subject: '',\r\n    catagory: '',\r\n    formWarning: '',\r\n    slotOptions: [],\r\n    message :'',\r\n    password :'',\r\n    color :'blue',\r\n    code:''\r\n  }\r\n  \r\n\r\n\r\n  submitRequest = () => {\r\n    var sessionDetails = undefined;\r\n\r\n    console.log([ this.state.subject]);\r\n    if ( this.state.subject) {\r\n      \r\n            const data = {\r\n              \r\n              email :this.state.subject\r\n            };\r\n\r\n            console.log(data)\r\n\r\n\r\n            \r\n            axios.post(`http://localhost:5000/password/requestChange`, data ) \r\n      .then(res => {\r\n          console.log(res);\r\n          console.log(res.data);\r\n          sessionDetails = res.data; \r\n          this.results(res.data.code,res.data.message,\"\",\"blue\");\r\n\r\n      }).catch((error) => {\r\n          if (error.response) {\r\n           \r\n               \r\n\r\n            this.results(false,\"Unsuccessful to resent password\",this.state.subject,\"red\");\r\n              }\r\n \r\n      });\r\n    \r\n    } else {\r\n\r\n      this.setState({ catagory: \"Invalid form\" , color :'red' });\r\n    }\r\n  }; \r\n\r\n\r\n  submitCode = () => { \r\n    console.log( this.state.code ) \r\n    if ( this.state.code         ) {\r\n      \r\n            const data = {\r\n              password :this.state.password,\r\n              code :this.state.code\r\n            };\r\n\r\n            console.log(data) \r\n\r\n            axios.post(`http://localhost:5000/password/reset`, data ) \r\n      .then(res => {\r\n         \r\n         var parseRes = res.data\r\n          if (parseRes.jwtToken) {\r\n                 localStorage.setItem(\"jwtToken\", parseRes.jwtToken);\r\n                 localStorage.setItem(\"isCounsellor\", parseRes.isCounsellor);\r\n               localStorage.setItem(\"userID\", parseRes.userID); \r\n\r\n              \r\n            toast.success('Password Change Successful', {\r\n                position: \"top-right\",\r\n                autoClose: 3000,\r\n                hideProgressBar: true,\r\n                closeOnClick: true,\r\n                pauseOnHover: false,\r\n                draggable: true,\r\n                progress: '',\r\n            });\r\n\r\n\r\n\r\n            \r\n        window.location=\"http://localhost:3000/dashboard\";\r\n        }\r\n        else {\r\n        \r\n          this.results(true,\"Invalid password change code \",\"\",\"red\"); \r\n        } \r\n          \r\n\r\n\r\n \r\n\r\n\r\n      }).catch((error) => {\r\n        this.results(true,\"Invalid password change code \",\"\",\"red\"); \r\n\r\n\r\n      });\r\n    \r\n    } else {\r\n\r\n      this.setState({ catagory: \"Invalid form\", color :'red' });\r\n    }\r\n  }; \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n  results = ( body,catagory      ,subject    ,color       )=> {\r\n    console.log(\"this.state\");\r\n    this.setState({body :body ,catagory : catagory,subject:subject,color:color})\r\n  }; \r\n\r\n\r\n  _onKeyUpSubject = e => {\r\n    var value = e.target.value.toLowerCase();\r\n    console.log(value);\r\n    this.setState({ subject: value });\r\n  }; \r\n  _onKeyUpCode = e => {\r\n    var value = e.target.value.toLowerCase();\r\n    console.log(value);\r\n    this.setState({ code: value });\r\n  }; \r\n  _onKeyUpMessage = e => {\r\n    var value = e.target.value.toLowerCase();\r\n    console.log(value);\r\n    this.setState({ message: value });\r\n  }; \r\n\r\n  _onKeyUpPassword = e => {\r\n   \r\n    var value = e.target.value.toLowerCase();\r\n    console.log(value);\r\n    this.setState({ password: value });\r\n  }; \r\n\r\n    \r\n  render() {\r\n    return (\r\n\r\n      <Container> <Segment>\r\n{ this.state.body   ? (  \r\n        \r\n<Form  >  \r\n        < Form.Group  widths='equal' >\r\n        <Form.Input label=\"Code\"\r\n                   onChange={this._onKeyUpCode}\r\n          \r\n                   control='input'\r\n        />\r\n        <br />\r\n        <Form.Input label=\"Password\"\r\n          \r\n          type='password' control='input'\r\n          onChange={this._onKeyUpPassword} \r\n        />\r\n        <br />\r\n\r\n      </Form.Group>\r\n      <p style={{ color: this.state.color }}>{this.state.catagory}</p>\r\n        < br />\r\n        <button class=\"ui button\" onClick={this.submitCode}>Submit</button>\r\n\r\n    </Form>\r\n\r\n\r\n        ) :\r\n        \r\n        (  <Form  >  \r\n            < Form.Group  widths='equal' >\r\n              <Form.Input label=\"Email\"\r\n                \r\n                type=\"Email\"\r\n                onChange={this._onKeyUpSubject}\r\n                name=\"s\"\r\n                id=\"s\"\r\n                placeholder=\"Email\"\r\n              />\r\n              <br />\r\n    \r\n            </Form.Group>\r\n            <p style={{ color: this.state.color }}>{this.state.catagory}</p>\r\n          < br />\r\n          <button class=\"ui button\" onClick={this.submitRequest}>Submit</button>\r\n  \r\n          </Form>\r\n        \r\n             \r\n    )\r\n        \r\n        \r\n        \r\n        \r\n        \r\n        \r\n        \r\n        }\r\n \r\n     \r\n      </Segment>  \r\n      \r\n\r\n      </Container>\r\n\r\n\r\n    )\r\n  }\r\n}\r\n\r\nexport default ChangePassword;\r\n\r\n"]},"metadata":{},"sourceType":"module"}